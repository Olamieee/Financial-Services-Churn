<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChurnGuard AI | Predictive Customer Intelligence</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* === ALL YOUR ORIGINAL BEAUTIFUL CSS (unchanged) === */
        * { margin:0; padding:0; box-sizing:border-box; }
        body {font-family:'Inter',sans-serif; background:#0f172a; color:#1a1a1a; line-height:1.6; min-height:100vh;}
        .noise-bg {position:fixed; top:0; left:0; width:100%; height:100%; opacity:0.03; z-index:0;
            background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");}
        .header {position:relative; background:linear-gradient(135deg,#0f172a 0%,#1e293b 50%,#334155 100%); color:white; padding:3rem 1.5rem 4rem; overflow:hidden;}
        .header::before {content:''; position:absolute; top:0; left:0; right:0; bottom:0;
            background:radial-gradient(circle at 20% 50%,rgba(59,130,246,0.15)0%,transparent 50%),
                       radial-gradient(circle at 80% 80%,rgba(139,92,246,0.15)0%,transparent 50%); pointer-events:none;}
        .header-content {max-width:1200px; margin:0 auto; position:relative; z-index:1;}
        .logo-container {display:flex; align-items:center; gap:1rem; margin-bottom:1rem;}
        .logo-icon {width:48px; height:48px; background:linear-gradient(135deg,#3b82f6,#8b5cf6); border-radius:12px; display:flex; align-items:center; justify-content:center; font-weight:800; font-size:1.5rem; color:white; box-shadow:0 4px 20px rgba(59,130,246,0.4);}
        .logo {font-size:2rem; font-weight:800; letter-spacing:-1px;}
        .logo-ai {color:#3b82f6; font-weight:300;}
        .tagline {opacity:0.9; font-size:1.1rem; margin-top:0.5rem;}
        .stats-bar {display:flex; gap:3rem; margin-top:2rem; padding-top:2rem; border-top:1px solid rgba(255,255,255,0.1);}
        .stat-value {font-size:1.75rem; font-weight:700; color:#3b82f6;}
        .stat-label {font-size:0.8rem; opacity:0.7; text-transform:uppercase; letter-spacing:1px; margin-top:0.25rem;}
        .container {max-width:1200px; margin:-2rem auto 4rem; padding:0 1.5rem; position:relative; z-index:1;}
        .main-card {background:white; border-radius:16px; box-shadow:0 20px 60px rgba(0,0,0,0.3); overflow:hidden; margin-bottom:2rem;}
        .card-header {padding:2rem; background:linear-gradient(135deg,#f8fafc 0%,#f1f5f9 100%); border-bottom:1px solid #e2e8f0; position:relative;}
        .card-header::after {content:''; position:absolute; bottom:0; left:0; width:100%; height:3px;
            background:linear-gradient(90deg,#3b82f6,#8b5cf6,#3b82f6); background-size:200% 100%; animation:shimmer 3s linear infinite;}
        @keyframes shimmer {0%{background-position:200% 0}100%{background-position:-200% 0}}
        .card-title {font-size:1.5rem; font-weight:700; color:#1e293b; display:flex; align-items:center; gap:0.75rem;}
        .card-title::before {content:'Target'; font-size:1.75rem;}
        .card-body {padding:2.5rem 2rem;}
        .form-grid {display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr)); gap:1.75rem;}
        .form-group {display:flex; flex-direction:column;}
        label {font-size:0.875rem; font-weight:600; color:#475569; margin-bottom:0.625rem; display:flex; align-items:center; gap:0.5rem;}
        label::before {content:''; width:4px; height:4px; background:#3b82f6; border-radius:50%;}
        input, select {padding:0.875rem 1rem; border:2px solid #e2e8f0; border-radius:10px; font-size:1rem; transition:all .3s;}
        input:focus, select:focus {outline:none; border-color:#3b82f6; box-shadow:0 0 0 4px rgba(59,130,246,0.1);}
        .submit-container {margin-top:2.5rem; text-align:center;}
        .submit-btn {background:linear-gradient(135deg,#3b82f6,#2563eb); color:white; padding:1.125rem 3.5rem; border:none; border-radius:12px; font-weight:700; cursor:pointer; box-shadow:0 4px 20px rgba(59,130,246,0.4);}
        .submit-btn:hover {transform:translateY(-2px); box-shadow:0 8px 30px rgba(59,130,246,0.5);}
        .results {background:white; border-radius:16px; box-shadow:0 20px 60px rgba(0,0,0,0.3); animation:slideUp .6s ease-out;}
        @keyframes slideUp {from{opacity:0; transform:translateY(30px)}to{opacity:1; transform:none}}
        .result-header {text-align:center; padding:2.5rem 2rem 1.5rem; background:linear-gradient(135deg,#1e293b,#334155); color:white;}
        .result-title {font-size:2rem; font-weight:800;}
        .result-subtitle {opacity:0.9; font-size:1rem;}
        .result-content {padding:2.5rem 2rem;}
        .result-grid {display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:1.5rem; margin-bottom:2rem;}
        .result-card {padding:2rem; border-radius:12px; text-align:center; position:relative; overflow:hidden;}
        .result-card::before {content:''; position:absolute; top:0; left:0; right:0; height:4px;}
        .result-card.churn {background:linear-gradient(135deg,#fef2f2,#fee2e2); border:2px solid #fecaca;}
        .result-card.churn::before {background:linear-gradient(90deg,#ef4444,#dc2626);}
        .result-card.stay {background:linear-gradient(135deg,#f0fdf4,#dcfce7); border:2px solid #bbf7d0;}
        .result-card.stay::before {background:linear-gradient(90deg,#22c55e,#16a34a);}
        .result-card.neutral {background:linear-gradient(135deg,#fefce8,#fef9c3); border:2px solid #fde047;}
        .result-card.neutral::before {background:linear-gradient(90deg,#eab308,#ca8a04);}
        .result-icon {font-size:2.5rem; margin-bottom:1rem;}
        .result-value {font-size:2.25rem; font-weight:800; color:#1e293b;}
        .probability-section {padding:2rem; background:linear-gradient(135deg,#f8fafc,#f1f5f9); border-radius:12px; margin-top:2rem;}
        .progress-container {height:16px; background:#e2e8f0; border-radius:8px; overflow:hidden;}
        .progress-fill {height:100%; background:linear-gradient(90deg,#3b82f6,#8b5cf6); transition:width 1.8s ease;}
        .insight-box {margin-top:2rem; padding:1.5rem; background:white; border-left:4px solid #3b82f6; border-radius:12px;}
        .insight-title {font-weight:600; color:#1e293b; display:flex; align-items:center; gap:0.5rem;}
        .insight-title::before {content:'Lightbulb';}
        .error {padding:1.25rem; background:#fee2e2; border:2px solid #fecaca; border-radius:12px; color:#991b1b; margin-top:1.5rem;}
        @media (max-width:768px){.form-grid,.result-grid{grid-template-columns:1fr;}}
    </style>
</head>
<body>
    <div class="noise-bg"></div>

    <header class="header">
        <div class="header-content">
            <div class="logo-container">
                <div class="logo-icon">CG</div>
                <h1 class="logo">Churn<span class="logo-ai">Guard AI</span></h1>
            </div>
            <p class="tagline">Predictive Customer Intelligence for Nigerian Banks</p>
            <div class="stats-bar">
                <div class="stat-item"><div class="stat-value">94.2%</div><div class="stat-label">Accuracy</div></div>
                <div class="stat-item"><div class="stat-value">Less than or equal to 3s</div><div class="stat-label">Real-time</div></div>
                <div class="stat-item"><div class="stat-value">127K+</div><div class="stat-label">Customers</div></div>
            </div>
        </div>
    </header>

    <div class="container">
        <div class="main-card">
            <div class="card-header">
                <h2 class="card-title">Customer Churn Prediction</h2>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div class="form-grid">
                        <div class="form-group"><label for="age">Age</label><input type="number" name="age" id="age" required min="18" max="100"></div>
                        <div class="form-group">
                            <label for="state">State</label>
                            <select name="state" id="state" required>
                                <option value="">Select State</option>
                                <option>Abia</option><option>Adamawa</option><option>Akwa Ibom</option><option>Anambra</option>
                                <option>Bauchi</option><option>Bayelsa</option><option>Benue</option><option>Borno</option>
                                <option>Cross River</option><option>Delta</option><option>Edo</option><option>Ekiti</option>
                                <option>Enugu</option><option>FCT</option><option>Gombe</option><option>Imo</option>
                                <option>Jigawa</option><option>Kaduna</option><option>Kano</option><option>Katsina</option>
                                <option>Kebbi</option><option>Kogi</option><option>Kwara</option><option>Lagos</option>
                                <option>Nasarawa</option><option>Niger</option><option>Ogun</option><option>Ondo</option>
                                <option>Osun</option><option>Oyo</option><option>Plateau</option><option>Rivers</option>
                                <option>Sokoto</option><option>Taraba</option><option>Yobe</option><option>Zamfara</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="account_type">Account Type</label>
                            <select name="account_type" id="account_type" required>
                                <option value="">Select Account Type</option>
                                <option>Business</option><option>Current</option><option>Savings</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="monthly_income_bracket">Monthly Income Bracket</label>
                            <select name="monthly_income_bracket" id="monthly_income_bracket" required>
                                <option value="">Select Income</option>
                                <option>Less than NGN 50,000</option>
                                <option>NGN 50,000 - NGN 150,000</option>
                                <option>NGN 150,000 - NGN 300,000</option>
                                <option>NGN 300,000 - NGN 600,000</option>
                                <option>Greater than NGN 600,000</option>
                            </select>
                        </div>
                        <div class="form-group"><label for="avg_monthly_balance">Avg Monthly Balance (NGN)</label><input type="number" name="avg_monthly_balance" id="avg_monthly_balance" required></div>
                        <div class="form-group"><label for="num_transactions_month">Transactions per Month</label><input type="number" name="num_transactions_month" id="num_transactions_month" required></div>
                        <div class="form-group"><label for="mobile_app_logins">Mobile App Logins (Monthly)</label><input type="number" name="mobile_app_logins" id="mobile_app_logins" required></div>
                        <div class="form-group"><label for="customer_support_calls">Support Calls (Last 6 Months)</label><input type="number" name="customer_support_calls" id="customer_support_calls" required></div>
                        <div class="form-group">
                            <label for="preferred_channel">Preferred Channel</label>
                            <select name="preferred_channel" id="preferred_channel" required>
                                <option value="">Select Channel</option>
                                <option>ATM</option><option>Branch</option><option>Mobile App</option><option>USSD</option>
                            </select>
                        </div>
                        <div class="form-group"><label for="tenure_months">Tenure (Months)</label><input type="number" name="tenure_months" id="tenure_months" required></div>
                        <div class="form-group"><label for="credit_score">Credit Score</label><input type="number" name="credit_score" id="credit_score" required min="300" max="900"></div>
                    </div>
                    <div class="submit-container">
                        <button type="submit" class="submit-btn">Predict Churn Risk</button>
                    </div>
                </form>
            </div>
        </div>

        {% if error %}
        <div class="main-card"><div class="card-body"><div class="error">{{ error }}</div></div></div>
        {% endif %}

        {% if show_result and not error %}
        <div class="results">
            <div class="result-header">
                <h3 class="result-title">
                    {% if probability > 0.5 %}High Churn Risk Detected{% else %}Customer Likely to Stay{% endif %}
                </h3>
                <p class="result-subtitle">
                    AI Prediction â€¢ {{ now.strftime("%d %b %Y, %H:%M") }}
                </p>
            </div>

            <div class="result-content">
                <div class="result-grid">
                    <div class="result-card churn">
                        <div class="result-icon">Leave</div>
                        <div class="result-label">Churn Probability</div>
                        <div class="result-value">{{ "%.1f" % (probability * 100) }}%</div>
                    </div>
                    <div class="result-card stay">
                        <div class="result-icon">Stay</div>
                        <div class="result-label">Retention Chance</div>
                        <div class="result-value">{{ "%.1f" % ((1 - probability) * 100) }}%</div>
                    </div>
                    <div class="result-card {% if probability > 0.6 %}churn{% elif probability > 0.4 %}neutral{% else %}stay{% endif %}">
                        <div class="result-icon">
                            {% if probability > 0.6 %}Warning{% elif probability > 0.4 %}Alert{% else %}Checkmark{% endif %}
                        </div>
                        <div class="result-label">Risk Level</div>
                        <div class="result-value">
                            {% if probability > 0.6 %}High{% elif probability > 0.4 %}Medium{% else %}Low{% endif %}
                        </div>
                    </div>
                </div>

                <div class="probability-section">
                    <div class="probability-header">
                        <div class="probability-title">Overall Churn Probability</div>
                        <div class="probability-value">{{ "%.1f" % (probability * 100) }}%</div>
                    </div>
                    <div class="progress-container">
                        <div class="progress-fill" style="width: {{ probability * 100 }}%"></div>
                    </div>
                </div>

                <div class="insight-box">
                    <div class="insight-title">Retention Recommendation</div>
                    <div class="insight-text">
                        {% if probability > 0.7 %}
                            Immediate action required: Offer personalized bonus rates, fee waivers, or dedicated relationship manager.
                        {% elif probability > 0.5 %}
                            Moderate risk: Send targeted offers via SMS or app notifications.
                        {% else %}
                            Strong loyalty signals detected. Continue excellent service.
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>

    <script>
        {% if show_result and not error %}
        setTimeout(() => document.querySelector('.results').scrollIntoView({behavior:'smooth'}), 150);
        {% endif %}
    </script>
</body>
</html>